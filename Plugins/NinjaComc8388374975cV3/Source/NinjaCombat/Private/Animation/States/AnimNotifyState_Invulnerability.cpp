// Ninja Bear Studio Inc., all rights reserved.
#include "Animation/States/AnimNotifyState_Invulnerability.h"

#include "NinjaCombatTags.h"
#include "Animation/NinjaCombatAnimNotifyHelpers.h"
#include "Components/SkeletalMeshComponent.h"

UAnimNotifyState_Invulnerability::UAnimNotifyState_Invulnerability()
{
}

void UAnimNotifyState_Invulnerability::NotifyBegin(USkeletalMeshComponent* MeshComp, UAnimSequenceBase* Animation, const float TotalDuration, const FAnimNotifyEventReference& EventReference)
{
	Super::NotifyBegin(MeshComp, Animation, TotalDuration, EventReference);
	
	const FGameplayTag EventTag = Tag_Combat_Event_Invulnerability_Begin;
	FNinjaCombatAnimNotifyHelpers::BroadcastEvent(MeshComp->GetOwner(), EventTag);
}

void UAnimNotifyState_Invulnerability::NotifyEnd(USkeletalMeshComponent* MeshComp, UAnimSequenceBase* Animation, const FAnimNotifyEventReference& EventReference)
{
	Super::NotifyEnd(MeshComp, Animation, EventReference);
	
	const FGameplayTag EventTag = Tag_Combat_Event_Invulnerability_End;
	FNinjaCombatAnimNotifyHelpers::BroadcastEvent(MeshComp->GetOwner(), EventTag);	
}

FString UAnimNotifyState_Invulnerability::GetNotifyName_Implementation() const
{
	static FString NotifyName = TEXT("Invulnerability");  
	return NotifyName;
}

